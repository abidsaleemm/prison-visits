<% content_for :page_title do %>
  <%= page_title(yield(:header)) %>
<% end %>

<% content_for :head do %>
  <%= csrf_meta_tag %>
<% end %>

<% content_for :javascripts do %>
  <%= stylesheet_link_tag('application', media: 'all') %>
<% end %>

<% content_for :javascripts do %>
  <script>
    moj.i18n = <%= raw(javascript_i18n.to_json) %>;
  </script>
  <%= javascript_include_tag('application') %>
  <% if Rails.env == 'test' %>
    <script>
      moj.log = function(){}; // Silence hiring banner
    </script>
  <% end %>
<% end %>

<% content_for :cookie_message do %>
  <%= t('.cookies_intro') %>
  <%= link_to(t('.cookies_find_out_more'), cookies_path) %>
<% end %>

<% content_for :content_override do %>
  <main id="wrapper" role="main">
    <div class="container">
      <section class="content inner cf" id="content">
        <header>
          <h1>
            <%= yield :header %>
          </h1>
        </header>

        <% if notice.present? %>
          <p class="validation-summary">
            <%= notice %>
          </p>
        <% end %>

        <%= yield %>
      </section>
    </div>
  </main>
<% end %>

<% content_for :footer_support_links do %>
  <li>
    <%= link_to(t('.cookies'), cookies_path) %>
  </li>
  <li>
    <%= link_to(t('.ts_and_cs'), terms_and_conditions_path) %>
  </li>
  <li>
    <%= link_to(t('.contact_us'), new_feedback_submission_path) %>
  </li>
  <% alternative_locales.each do |locale| %>
    <li>
      <%= link_to(t('language', locale: locale), locale: locale) %>
    </li>
  <% end %>
<% end %>

<%= render(template: 'layouts/moj_template') %>
